<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3: Your Commonwealth of One</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .atcf-meter {
            height: 30px;
            background: linear-gradient(to right, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            border-radius: 15px;
            position: relative;
        }
        .atcf-indicator {
            position: absolute;
            width: 4px;
            height: 40px;
            background: white;
            border: 2px solid #1f2937;
            top: -5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [currentSection, setCurrentSection] = useState('intro');
            const [studentData, setStudentData] = useState({
                name: '',
                faimqirf: {
                    ik: '',
                    prst: '',
                    spts: [''],
                    ah: '',
                    capab: [''],
                    cons: [''],
                    metacons: ['']
                },
                atcf: {
                    historical: 5,
                    present: 5,
                    prospective: 5
                },
                constructors: [],
                proofOfCare: null
            });

            const sections = [
                { id: 'intro', label: 'Introduction', icon: 'üåü' },
                { id: 'atcf-assessment', label: 'ATCF Assessment', icon: 'üìä' },
                { id: 'faimqirf', label: 'Model Yourself', icon: 'üîç' },
                { id: 'architecture', label: 'Life Architecture', icon: 'üèóÔ∏è' },
                { id: 'constructors', label: 'Build Constructors', icon: '‚öôÔ∏è' },
                { id: 'proof', label: 'Proof-of-Care', icon: 'üß™' },
                { id: 'summary', label: 'Your Commonwealth', icon: 'üëë' }
            ];

            return (
                <div className="min-h-screen">
                    <header className="gradient-bg text-white shadow-lg">
                        <div className="max-w-5xl mx-auto px-4 py-6">
                            <h1 className="text-3xl font-bold mb-2">Your Commonwealth of One</h1>
                            <p className="text-lg opacity-90">Applying Everything to Your Life</p>
                        </div>
                    </header>

                    <nav className="bg-white shadow-sm sticky top-0 z-50">
                        <div className="max-w-5xl mx-auto px-4">
                            <div className="flex overflow-x-auto py-4 space-x-2">
                                {sections.map(section => (
                                    <button
                                        key={section.id}
                                        onClick={() => setCurrentSection(section.id)}
                                        className={`flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-all ${
                                            currentSection === section.id ? 'bg-purple-100 text-purple-700 font-semibold' : 'hover:bg-gray-100'
                                        }`}
                                    >
                                        <span className="text-xl">{section.icon}</span>
                                        <span>{section.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-5xl mx-auto px-4 py-8">
                        <div className="fade-in">
                            {currentSection === 'intro' && <IntroSection onNext={() => setCurrentSection('atcf-assessment')} />}
                            {currentSection === 'atcf-assessment' && (
                                <ATCFAssessment 
                                    atcf={studentData.atcf}
                                    setATCF={(atcf) => setStudentData({...studentData, atcf})}
                                    onNext={() => setCurrentSection('faimqirf')}
                                />
                            )}
                            {currentSection === 'faimqirf' && (
                                <FAIMQIRFSection 
                                    faimqirf={studentData.faimqirf}
                                    setFaimqirf={(faimqirf) => setStudentData({...studentData, faimqirf})}
                                    onNext={() => setCurrentSection('architecture')}
                                />
                            )}
                            {currentSection === 'architecture' && <ArchitectureSection onNext={() => setCurrentSection('constructors')} />}
                            {currentSection === 'constructors' && <ConstructorsSection onNext={() => setCurrentSection('proof')} />}
                            {currentSection === 'proof' && <ProofOfCareSection onNext={() => setCurrentSection('summary')} />}
                            {currentSection === 'summary' && <SummarySection studentData={studentData} />}
                        </div>
                    </main>
                </div>
            );
        }

        function IntroSection({ onNext }) {
            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">From Philosophers to You: The Personal Turn</h2>
                    
                    <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-300 rounded-lg p-6 mb-6">
                        <h3 className="text-xl font-bold text-purple-900 mb-3">üéØ The Core Realization</h3>
                        <p className="text-gray-700 mb-3">
                            You just modeled 12 philosophers‚Äîseeing how their standpoints shaped their ethical reasoning. 
                            Now you'll model the most important agent of all: <strong>yourself</strong>.
                        </p>
                        <div className="bg-white p-4 rounded border-l-4 border-purple-500">
                            <p className="font-semibold text-purple-900 mb-2">Your FAIM-QIRF model MIRORS your soul:</p>
                            <p className="text-sm text-gray-700">
                                It's your coherent, integrated self navigating through time. When your ATCF 
                                (Adaptive Temporal Coherence Function) is high, you feel integrated and purposeful. 
                                When it drops, you feel fragmented and lost.
                            </p>
                        </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6 mb-6">
                        <div className="bg-green-50 border-2 border-green-300 rounded-lg p-5">
                            <h4 className="font-bold text-green-900 mb-3">üìà What High ATCF Feels Like</h4>
                            <ul className="space-y-2 text-sm text-gray-700">
                                <li>‚úì Coherent story from past to present</li>
                                <li>‚úì Life domains support each other</li>
                                <li>‚úì Can imagine authentic futures</li>
                                <li>‚úì Feel integrated and purposeful</li>
                                <li>‚úì Decisions come from authentic self</li>
                            </ul>
                        </div>
                        <div className="bg-red-50 border-2 border-red-300 rounded-lg p-5">
                            <h4 className="font-bold text-red-900 mb-3">üìâ What Low ATCF Feels Like</h4>
                            <ul className="space-y-2 text-sm text-gray-700">
                                <li>‚úó Can't trace coherent story</li>
                                <li>‚úó Life domains in conflict</li>
                                <li>‚úó Future feels foggy or requires betrayal</li>
                                <li>‚úó Feel fragmented and lost</li>
                                <li>‚úó Decisions feel forced or inauthentic</li>
                            </ul>
                        </div>
                    </div>

                    <div className="bg-yellow-50 border-l-4 border-yellow-500 p-5 mb-6">
                        <h4 className="font-bold text-yellow-900 mb-2">üí° The Big Insight</h4>
                        <p className="text-gray-700">
                            You are a <strong>"Commonwealth of One"</strong>‚Äînot a dictator issuing orders to yourself, 
                            but a facilitator coordinating multiple life functions (career, love, family, health, interests). 
                            When these coordinate well, ATCF rises. When they conflict, ATCF drops.
                        </p>
                    </div>

                    <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-6 mb-6">
                        <h4 className="font-bold text-blue-900 mb-3">üéì What You'll Do in This Module</h4>
                        <ol className="space-y-2 text-gray-700 list-decimal list-inside">
                            <li>Assess your current ATCF baseline</li>
                            <li>Build your personal FAIM-QIRF model</li>
                            <li>Design your life coordination architecture</li>
                            <li>Create three working constructors</li>
                            <li>Design a proof-of-care experiment</li>
                            <li>Generate your "Commonwealth Report"</li>
                        </ol>
                    </div>

                    <button
                        onClick={onNext}
                        className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                    >
                        Begin ATCF Assessment ‚Üí
                    </button>
                </div>
            );
        }

        function ATCFAssessment({ atcf, setATCF, onNext }) {
            const [currentDim, setCurrentDim] = useState('historical');

            const dimensions = {
                historical: {
                    title: "Historical Continuity",
                    question: "Can you trace a coherent story from your past to your present?",
                    high: "My current choices clearly build on my past; strong narrative thread",
                    mid: "Mostly coherent, some disconnections I can explain",
                    low: "Significant breaks; I've changed direction in ways I don't fully understand"
                },
                present: {
                    title: "Present Integration",
                    question: "Do your life domains support or fight each other?",
                    high: "Work, love, learning, health, interests all support each other",
                    mid: "Most domains align; one or two tensions but manageable",
                    low: "Significant conflicts; I feel pulled in incompatible directions"
                },
                prospective: {
                    title: "Prospective Coherence",
                    question: "Can you imagine authentic futures from here?",
                    high: "Multiple possible paths forward, all recognizably me",
                    mid: "Clear path forward that feels authentic",
                    low: "Future feels foggy or requires abandoning parts of myself"
                }
            };

            const avgATCF = ((atcf.historical + atcf.present + atcf.prospective) / 3).toFixed(1);
            const isComplete = atcf.historical > 0 && atcf.present > 0 && atcf.prospective > 0;

            const getATCFColor = (score) => {
                if (score >= 8) return 'text-green-600';
                if (score >= 6) return 'text-yellow-600';
                return 'text-red-600';
            };

            const getATCFLabel = (score) => {
                if (score >= 8) return 'Strong Integration';
                if (score >= 6) return 'Moderate - Watch Carefully';
                return 'Warning - Intervention Needed';
            };

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">ATCF Assessment: Your Soul Integration Score</h2>

                    <div className="bg-blue-50 border-l-4 border-blue-500 p-5 mb-6">
                        <p className="text-gray-700">
                            <strong>ATCF (Adaptive Temporal Coherence Function)</strong> measures how well you maintain 
                            your core identity while adapting. High scores correlate with life satisfaction and wellbeing. 
                            Scores below 7 for multiple months signal fragmentation requiring intervention.
                        </p>
                    </div>

                    {/* Dimension Tabs */}
                    <div className="flex space-x-2 mb-6">
                        {Object.keys(dimensions).map(dim => (
                            <button
                                key={dim}
                                onClick={() => setCurrentDim(dim)}
                                className={`flex-1 px-4 py-2 rounded-lg font-semibold transition-colors ${
                                    currentDim === dim ? 'bg-purple-600 text-white' : 'bg-gray-200 hover:bg-gray-300'
                                }`}
                            >
                                {dimensions[dim].title}
                            </button>
                        ))}
                    </div>

                    {/* Current Dimension Assessment */}
                    <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-300 rounded-lg p-6 mb-6">
                        <h3 className="text-xl font-bold text-purple-900 mb-3">{dimensions[currentDim].title}</h3>
                        <p className="text-lg text-gray-700 mb-4">{dimensions[currentDim].question}</p>

                        <div className="space-y-4 mb-6">
                            <div className="bg-white p-4 rounded">
                                <p className="text-sm text-gray-600 mb-2">9-10: Excellent</p>
                                <p className="text-sm text-gray-700">{dimensions[currentDim].high}</p>
                            </div>
                            <div className="bg-white p-4 rounded">
                                <p className="text-sm text-gray-600 mb-2">6-8: Moderate</p>
                                <p className="text-sm text-gray-700">{dimensions[currentDim].mid}</p>
                            </div>
                            <div className="bg-white p-4 rounded">
                                <p className="text-sm text-gray-600 mb-2">1-5: Warning</p>
                                <p className="text-sm text-gray-700">{dimensions[currentDim].low}</p>
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-3">
                                Your Score (1-10):
                            </label>
                            <input
                                type="range"
                                min="1"
                                max="10"
                                value={atcf[currentDim]}
                                onChange={(e) => setATCF({...atcf, [currentDim]: parseInt(e.target.value)})}
                                className="w-full"
                            />
                            <div className="flex justify-between text-sm text-gray-600 mt-2">
                                <span>1 (Crisis)</span>
                                <span className={`text-2xl font-bold ${getATCFColor(atcf[currentDim])}`}>
                                    {atcf[currentDim]}
                                </span>
                                <span>10 (Excellent)</span>
                            </div>
                        </div>
                    </div>

                    {/* ATCF Summary */}
                    {isComplete && (
                        <div className="bg-white border-2 border-gray-300 rounded-lg p-6 mb-6">
                            <h3 className="text-2xl font-bold text-gray-900 mb-4">Your ATCF Summary</h3>
                            
                            <div className="grid grid-cols-3 gap-4 mb-6">
                                <div className="text-center">
                                    <p className="text-sm text-gray-600 mb-1">Historical</p>
                                    <p className={`text-3xl font-bold ${getATCFColor(atcf.historical)}`}>
                                        {atcf.historical}
                                    </p>
                                </div>
                                <div className="text-center">
                                    <p className="text-sm text-gray-600 mb-1">Present</p>
                                    <p className={`text-3xl font-bold ${getATCFColor(atcf.present)}`}>
                                        {atcf.present}
                                    </p>
                                </div>
                                <div className="text-center">
                                    <p className="text-sm text-gray-600 mb-1">Prospective</p>
                                    <p className={`text-3xl font-bold ${getATCFColor(atcf.prospective)}`}>
                                        {atcf.prospective}
                                    </p>
                                </div>
                            </div>

                            <div className="bg-gradient-to-br from-purple-100 to-blue-100 rounded-lg p-6">
                                <p className="text-sm text-gray-700 mb-2">Combined ATCF Score:</p>
                                <p className={`text-5xl font-bold mb-2 ${getATCFColor(avgATCF)}`}>
                                    {avgATCF}
                                </p>
                                <p className={`text-lg font-semibold ${getATCFColor(avgATCF)}`}>
                                    {getATCFLabel(avgATCF)}
                                </p>

                                <div className="mt-4 atcf-meter">
                                    <div 
                                        className="atcf-indicator"
                                        style={{ left: `calc(${(avgATCF / 10) * 100}% - 2px)` }}
                                    ></div>
                                </div>
                                <div className="flex justify-between text-xs text-gray-600 mt-2">
                                    <span>Crisis</span>
                                    <span>Warning</span>
                                    <span>Good</span>
                                    <span>Excellent</span>
                                </div>
                            </div>

                            {avgATCF < 7 && (
                                <div className="mt-4 bg-red-50 border-l-4 border-red-500 p-4">
                                    <p className="font-semibold text-red-900 mb-2">‚ö†Ô∏è Warning Level</p>
                                    <p className="text-sm text-gray-700">
                                        Your ATCF score indicates fragmentation. This module will help you identify 
                                        the causes and design interventions. If this persists for 3+ months, consider 
                                        professional support alongside the constructors you'll build here.
                                    </p>
                                </div>
                            )}
                        </div>
                    )}

                    <button
                        onClick={onNext}
                        disabled={!isComplete}
                        className={`w-full px-6 py-3 rounded-lg font-semibold transition-colors ${
                            isComplete 
                                ? 'bg-purple-600 hover:bg-purple-700 text-white' 
                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                        }`}
                    >
                        {isComplete ? 'Continue to Model Yourself ‚Üí' : 'Complete All Three Dimensions'}
                    </button>
                </div>
            );
        }

        function FAIMQIRFSection({ faimqirf, setFaimqirf, onNext }) {
            const [currentField, setCurrentField] = useState('ik');

            const fields = {
                ik: {
                    title: "Identity Kernel (IK)",
                    prompt: "What are your core non-negotiable values? What defines your authentic self?",
                    placeholder: "e.g., Honesty in relationships, continuous learning, supporting family, creative expression...",
                    examples: [
                        "I never compromise on honesty with people I care about",
                        "I must maintain space for creative work",
                        "Supporting my family is non-negotiable"
                    ]
                },
                prst: {
                    title: "Phenomenological Reference Space (PRS_t)",
                    prompt: "What is currently visible/salient to you about life and ethics?",
                    placeholder: "What patterns do you notice that others might miss?",
                    examples: [
                        "I notice how economic inequality shapes life opportunities",
                        "I see how technology changes communication patterns",
                        "I'm attuned to environmental impacts of daily choices"
                    ]
                },
                spts: {
                    title: "Standpoint Set (SPTS)",
                    prompt: "List your key standpoints that shape what you can see",
                    placeholder: "Age, gender, race, class, region, experiences...",
                    examples: [
                        "First-generation college student",
                        "Rural background, now in urban setting",
                        "Working two jobs through college"
                    ]
                },
                ah: {
                    title: "Assembly History (AH)",
                    prompt: "What key experiences shaped your current filters?",
                    placeholder: "Formative events, relationships, lessons learned...",
                    examples: [
                        "Parents' divorce taught me about financial vulnerability",
                        "Year abroad showed me cultural assumptions I didn't know I had",
                        "Volunteer work revealed privilege I'd been blind to"
                    ]
                },
                capab: {
                    title: "Capabilities (Capab)",
                    prompt: "What can you reliably do? List your proven methods.",
                    placeholder: "Skills you can deploy successfully across contexts",
                    examples: [
                        "Technical writing - can explain complex topics clearly",
                        "Conflict mediation - help people find common ground",
                        "Data analysis - turn messy data into insights"
                    ]
                },
                cons: {
                    title: "Constructors (Cons)",
                    prompt: "What procedures currently structure your life?",
                    placeholder: "Routines, habits, systems that persist without active attention",
                    examples: [
                        "Morning routine: exercise, breakfast, review day",
                        "Weekly budget review every Sunday",
                        "Monthly check-in call with family"
                    ]
                },
                metacons: {
                    title: "Meta-Constructors (MetaCons)",
                    prompt: "How do you currently review and improve your systems?",
                    placeholder: "Learning loops, review processes, adaptation mechanisms",
                    examples: [
                        "Quarterly life review assessing what's working",
                        "Weekly reflection journal",
                        "Annual goal reassessment"
                    ]
                }
            };

            const fieldOrder = ['ik', 'prst', 'spts', 'ah', 'capab', 'cons', 'metacons'];
            const currentIndex = fieldOrder.indexOf(currentField);
            const isLastField = currentIndex === fieldOrder.length - 1;
            const isComplete = faimqirf.ik && faimqirf.prst && faimqirf.spts.length > 0 && 
                              faimqirf.ah && faimqirf.capab.length > 0 && faimqirf.cons.length > 0;

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">Build Your FAIM-QIRF Model</h2>

                    <div className="bg-purple-50 border-l-4 border-purple-500 p-5 mb-6">
                        <p className="text-gray-700">
                            <strong>This IS your soul model.</strong> Your FAIM-QIRF structure defines how you perceive, 
                            reason, and act. Building this model explicitly gives you OS2 capacity‚Äîthe ability to see 
                            and modify your own operating system.
                        </p>
                    </div>

                    {/* Field Navigation */}
                    <div className="flex flex-wrap gap-2 mb-6">
                        {fieldOrder.map(field => (
                            <button
                                key={field}
                                onClick={() => setCurrentField(field)}
                                className={`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${
                                    currentField === field 
                                        ? 'bg-purple-600 text-white' 
                                        : 'bg-gray-200 hover:bg-gray-300'
                                }`}
                            >
                                {fields[field].title.split(' ')[0]}
                            </button>
                        ))}
                    </div>

                    {/* Current Field */}
                    <div className="bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-purple-300 rounded-lg p-6 mb-6">
                        <h3 className="text-2xl font-bold text-purple-900 mb-3">{fields[currentField].title}</h3>
                        <p className="text-lg text-gray-700 mb-4">{fields[currentField].prompt}</p>

                        <div className="bg-white border border-gray-300 rounded-lg p-4 mb-4">
                            <p className="text-sm text-gray-600 mb-2">Examples:</p>
                            <ul className="space-y-1 text-sm text-gray-700">
                                {fields[currentField].examples.map((ex, i) => (
                                    <li key={i}>‚Ä¢ {ex}</li>
                                ))}
                            </ul>
                        </div>

                        <textarea
                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                            rows="6"
                            placeholder={fields[currentField].placeholder}
                            value={Array.isArray(faimqirf[currentField]) ? faimqirf[currentField].join('\n') : faimqirf[currentField]}
                            onChange={(e) => {
                                if (Array.isArray(faimqirf[currentField])) {
                                    setFaimqirf({
                                        ...faimqirf,
                                        [currentField]: e.target.value.split('\n').filter(s => s.trim())
                                    });
                                } else {
                                    setFaimqirf({...faimqirf, [currentField]: e.target.value});
                                }
                            }}
                        />
                    </div>

                    {/* Navigation */}
                    <div className="flex justify-between">
                        <button
                            onClick={() => setCurrentField(fieldOrder[currentIndex - 1])}
                            disabled={currentIndex === 0}
                            className={`px-6 py-3 rounded-lg font-semibold transition-colors ${
                                currentIndex === 0
                                    ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                    : 'bg-gray-300 hover:bg-gray-400'
                            }`}
                        >
                            ‚Üê Previous
                        </button>

                        {!isLastField ? (
                            <button
                                onClick={() => setCurrentField(fieldOrder[currentIndex + 1])}
                                className="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                            >
                                Next ‚Üí
                            </button>
                        ) : (
                            <button
                                onClick={onNext}
                                disabled={!isComplete}
                                className={`px-6 py-3 rounded-lg font-semibold transition-colors ${
                                    isComplete
                                        ? 'bg-purple-600 hover:bg-purple-700 text-white'
                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                }`}
                            >
                                {isComplete ? 'Continue to Architecture ‚Üí' : 'Complete All Fields'}
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        function ArchitectureSection({ onNext }) {
            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">Design Your Life Architecture</h2>

                    <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-300 rounded-lg p-6 mb-6">
                        <h3 className="text-xl font-bold text-purple-900 mb-3">From Dictator to Architect</h3>
                        <p className="text-gray-700 mb-3">
                            Traditional life planning: You as dictator issuing rigid orders ("I will be X at company Y by age Z").
                        </p>
                        <p className="text-gray-700">
                            <strong>Commonwealth of One</strong>: You as architect coordinating multiple life functions 
                            that need to cooperate, not compete.
                        </p>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6 mb-6">
                        <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-5">
                            <h4 className="font-bold text-blue-900 mb-3">üéØ Simple Center</h4>
                            <p className="text-sm text-gray-700 mb-3">Minimal essential commitments:</p>
                            <ul className="space-y-2 text-sm text-gray-700">
                                <li>‚Ä¢ Core values (your IK)</li>
                                <li>‚Ä¢ Non-negotiable relationships</li>
                                <li>‚Ä¢ Health/wellbeing baselines</li>
                                <li>‚Ä¢ Financial safety margins</li>
                            </ul>
                        </div>

                        <div className="bg-green-50 border-2 border-green-300 rounded-lg p-5">
                            <h4 className="font-bold text-green-900 mb-3">üåø Wild Edges</h4>
                            <p className="text-sm text-gray-700 mb-3">Maximum diversity of pathways:</p>
                            <ul className="space-y-2 text-sm text-gray-700">
                                <li>‚Ä¢ Multiple career possibilities</li>
                                <li>‚Ä¢ Diverse skill portfolio</li>
                                <li>‚Ä¢ Network across domains</li>
                                <li>‚Ä¢ Anti-fragile options</li>
                            </ul>
                        </div>
                    </div>

                    <div className="bg-yellow-50 border-l-4 border-yellow-500 p-5 mb-6">
                        <h4 className="font-bold text-yellow-900 mb-3">‚öôÔ∏è Your Life Functions (Internal "Agents")</h4>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üíº Career</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">‚ù§Ô∏è Relationships</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üë®‚Äçüë©‚Äçüëß Family</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üí™ Health</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üìö Learning</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üé® Interests</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üí∞ Financial</p>
                            </div>
                            <div className="bg-white p-3 rounded">
                                <p className="font-semibold text-sm">üåê Community</p>
                            </div>
                        </div>
                        <p className="text-sm text-gray-700 mt-3">
                            When these functions coordinate (support each other), ATCF rises. When they conflict 
                            (compete for time/energy), ATCF drops.
                        </p>
                    </div>

                    <div className="bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-300 rounded-lg p-6 mb-6">
                        <h4 className="font-bold text-red-900 mb-3">üõ°Ô∏è ATCF as Non-Negotiable Guardrail</h4>
                        <p className="text-gray-700 mb-3">
                            <strong>The Soul-Safety Rule:</strong> No "success" that fragments your identity.
                        </p>
                        <div className="bg-white p-4 rounded">
                            <p className="text-sm text-gray-700 mb-2">Decision Filter:</p>
                            <p className="text-sm text-gray-700">
                                If a choice (job, relationship, location) would drop your ATCF below 7/10 for 
                                3+ months, it's inadmissible‚Äîno matter how "successful" it looks externally.
                            </p>
                        </div>
                    </div>

                    <button
                        onClick={onNext}
                        className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                    >
                        Continue to Build Constructors ‚Üí
                    </button>
                </div>
            );
        }

        function ConstructorsSection({ onNext }) {
            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">Build Your Constructors</h2>

                    <div className="bg-blue-50 border-l-4 border-blue-500 p-5 mb-6">
                        <p className="text-gray-700">
                            <strong>Constructors are procedures that persist</strong> - they keep working even when 
                            you're not thinking about them. Your life quality depends more on your constructors than 
                            your intentions.
                        </p>
                    </div>

                    <div className="space-y-6 mb-6">
                        {/* Constructor 1: ATCF Protection */}
                        <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-300 rounded-lg p-6">
                            <h3 className="text-xl font-bold text-purple-900 mb-4">Constructor 1: ATCF Protection (Weekly)</h3>
                            
                            <div className="bg-white rounded-lg p-4 mb-3">
                                <p className="font-semibold text-sm text-gray-700 mb-2">TRIGGER:</p>
                                <p className="text-sm text-gray-600">Every Sunday evening at 7pm (calendar alarm)</p>
                            </div>

                            <div className="bg-white rounded-lg p-4 mb-3">
                                <p className="font-semibold text-sm text-gray-700 mb-2">PROCESS:</p>
                                <ol className="text-sm text-gray-600 list-decimal list-inside space-y-1">
                                    <li>Quick ATCF check: Rate 3 dimensions (5 min)</li>
                                    <li>Identify any soul costs this week (5 min)</li>
                                    <li>Note life functions that conflicted (3 min)</li>
                                    <li>Plan one coordination improvement for next week (5 min)</li>
                                </ol>
                            </div>

                            <div className="bg-white rounded-lg p-4">
                                <p className="font-semibold text-sm text-gray-700 mb-2">OUTPUT:</p>
                                <p className="text-sm text-gray-600">Weekly ATCF score + one action to raise/maintain it</p>
                            </div>
                        </div>

                        {/* Constructor 2: Capability Development */}
                        <div className="bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-300 rounded-lg p-6">
                            <h3 className="text-xl font-bold text-green-900 mb-4">Constructor 2: Capability Development (Daily/Weekly)</h3>
                            
                            <div className="bg-white rounded-lg p-4 mb-3">
                                <p className="font-semibold text-sm text-gray-700 mb-2">EXAMPLE - Deep Work:</p>
                                <p className="text-sm text-gray-600 mb-2"><strong>TRIGGER:</strong> M/W/F at 8am (after coffee)</p>
                                <p className="text-sm text-gray-600 mb-2"><strong>PROCESS:</strong> Phone in drawer, timer for 90 min, single focus task</p>
                                <p className="text-sm text-gray-600 mb-2"><strong>OUTPUT:</strong> Measurable progress on project</p>
                                <p className="text-sm text-gray-600"><strong>FAILURE ENVELOPE:</strong> Skipped if &lt;7 hours sleep</p>
                            </div>

                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4">
                                <p className="text-sm text-gray-700">
                                    <strong>Design your own:</strong> Pick a capability you want to develop and build 
                                    a reliable procedure for practicing it regularly.
                                </p>
                            </div>
                        </div>

                        {/* Constructor 3: Relationship Coordination */}
                        <div className="bg-gradient-to-br from-pink-50 to-purple-50 border-2 border-pink-300 rounded-lg p-6">
                            <h3 className="text-xl font-bold text-pink-900 mb-4">Constructor 3: Relationship Coordination (Monthly)</h3>
                            
                            <div className="bg-white rounded-lg p-4 mb-3">
                                <p className="font-semibold text-sm text-gray-700 mb-2">EXAMPLE - Partnership Review:</p>
                                <p className="text-sm text-gray-600 mb-2"><strong>TRIGGER:</strong> First Sunday of month, after dinner</p>
                                <p className="text-sm text-gray-600 mb-2"><strong>PROCESS:</strong> Both rate relationship quality (1-10), share appreciation, discuss one improvement</p>
                                <p className="text-sm text-gray-600 mb-2"><strong>OUTPUT:</strong> Shared understanding + one commitment each</p>
                                <p className="text-sm text-gray-600"><strong>META-CONSTRUCTOR:</strong> Quarterly review of review process itself</p>
                            </div>

                            <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
                                <p className="text-sm text-gray-700">
                                    <strong>Key principle:</strong> Make expectations explicit, review regularly, 
                                    adapt as needed. Never assume‚Äîalways verify coordination is working.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div className="bg-red-50 border-2 border-red-300 rounded-lg p-5 mb-6">
                        <h4 className="font-bold text-red-900 mb-2">‚ö†Ô∏è Critical: Meta-Constructor Installation</h4>
                        <p className="text-sm text-gray-700">
                            Every constructor needs a meta-constructor‚Äîa review loop that checks if the constructor 
                            is still working. Monthly minimum: "Is this procedure serving me? Does it need adaptation?"
                        </p>
                    </div>

                    <button
                        onClick={onNext}
                        className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                    >
                        Continue to Proof-of-Care ‚Üí
                    </button>
                </div>
            );
        }

        function ProofOfCareSection({ onNext }) {
            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">Design Your Proof-of-Care</h2>

                    <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-300 rounded-lg p-6 mb-6">
                        <h3 className="text-xl font-bold text-purple-900 mb-3">Stop Planning. Start Proving.</h3>
                        <p className="text-gray-700">
                            Instead of making irreversible commitments based on hope, run small experiments with 
                            clear success criteria and exit conditions. This is how you make decisions in complex systems.
                        </p>
                    </div>

                    <div className="space-y-6 mb-6">
                        {/* Toulmin Structure for Proof */}
                        <div className="bg-white border-2 border-gray-300 rounded-lg p-6">
                            <h4 className="font-bold text-gray-900 mb-4">Structure of a Proof (Using Toulmin Framework)</h4>

                            <div className="space-y-4">
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <p className="font-semibold text-blue-900 mb-2">CLAIM (What you're testing):</p>
                                    <p className="text-sm text-gray-700">
                                        "Moving to City X would support my (career + relationship + creative) functions 
                                        while maintaining ATCF ‚â• 7"
                                    </p>
                                </div>

                                <div className="bg-green-50 p-4 rounded-lg">
                                    <p className="font-semibold text-green-900 mb-2">GROUNDS (Evidence you'll gather):</p>
                                    <ul className="text-sm text-gray-700 space-y-1 list-disc list-inside">
                                        <li>6-week trial residency (sublet)</li>
                                        <li>10 informational interviews (career test)</li>
                                        <li>Partner co-location during trial</li>
                                        <li>2 community dinners (social test)</li>
                                        <li>8 hrs/week creative project time</li>
                                    </ul>
                                </div>

                                <div className="bg-purple-50 p-4 rounded-lg">
                                    <p className="font-semibold text-purple-900 mb-2">WARRANT (Logic):</p>
                                    <p className="text-sm text-gray-700">
                                        IF all functions show improvement OR maintenance during 6 weeks, AND neither 
                                        my nor partner's ATCF drops below 7/10, THEN City X is capability-compatible
                                    </p>
                                </div>

                                <div className="bg-yellow-50 p-4 rounded-lg">
                                    <p className="font-semibold text-yellow-900 mb-2">QUALIFIER (Confidence level):</p>
                                    <p className="text-sm text-gray-700">
                                        Moderate confidence; 6 weeks tests acute adjustment, not long-term integration. 
                                        Would need Level-2 proof (6 months) before permanent commitment.
                                    </p>
                                </div>

                                <div className="bg-red-50 p-4 rounded-lg">
                                    <p className="font-semibold text-red-900 mb-2">REBUTTALS (Exit conditions):</p>
                                    <ul className="text-sm text-gray-700 space-y-1 list-disc list-inside">
                                        <li>IF career function &lt;5/10 for 2 consecutive weeks</li>
                                        <li>IF relationship quality drops &lt;6/10</li>
                                        <li>IF combined ATCF averages &lt;7/10</li>
                                        <li>IF financial burn exceeds $X threshold</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        {/* Why This Works */}
                        <div className="bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-300 rounded-lg p-6">
                            <h4 className="font-bold text-green-900 mb-3">üéØ Why Proofs Work</h4>
                            <ul className="space-y-2 text-sm text-gray-700">
                                <li><strong>Reversible:</strong> You can exit without catastrophic loss</li>
                                <li><strong>Data-generating:</strong> You gather real evidence, not just intuitions</li>
                                <li><strong>ATCF-preserving:</strong> Exit conditions prevent soul cost</li>
                                <li><strong>Learning-oriented:</strong> "Failure" teaches as much as success</li>
                                <li><strong>Anxiety-reducing:</strong> Replaces worry with action</li>
                            </ul>
                        </div>

                        {/* Your Assignment */}
                        <div className="bg-blue-50 border-l-4 border-blue-500 p-5">
                            <h4 className="font-bold text-blue-900 mb-3">üìù Your Assignment</h4>
                            <p className="text-sm text-gray-700 mb-3">
                                Pick a major life decision you're facing (or will face soon):
                            </p>
                            <ul className="text-sm text-gray-700 space-y-1 list-disc list-inside mb-3">
                                <li>Career path / job choice</li>
                                <li>Graduate school decision</li>
                                <li>Relationship commitment level</li>
                                <li>Location / living situation</li>
                                <li>Major purchase decision</li>
                            </ul>
                            <p className="text-sm text-gray-700">
                                Design a small-scale, reversible proof that tests this decision before you commit fully.
                            </p>
                        </div>
                    </div>

                    <button
                        onClick={onNext}
                        className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                    >
                        Continue to Summary ‚Üí
                    </button>
                </div>
            );
        }

        function SummarySection({ studentData }) {
            const avgATCF = ((studentData.atcf.historical + studentData.atcf.present + studentData.atcf.prospective) / 3).toFixed(1);

            const downloadReport = () => {
                const report = `
MY COMMONWEALTH OF ONE - PERSONAL REPORT
=====================================

ATCF BASELINE ASSESSMENT
------------------------
Historical Continuity: ${studentData.atcf.historical}/10
Present Integration: ${studentData.atcf.present}/10
Prospective Coherence: ${studentData.atcf.prospective}/10
Combined ATCF: ${avgATCF}/10

MY FAIM-QIRF MODEL
-----------------
Identity Kernel (IK):
${studentData.faimqirf.ik}

Phenomenological Reference Space (PRS_t):
${studentData.faimqirf.prst}

Standpoint Set (SPTS):
${studentData.faimqirf.spts.join('\n')}

Assembly History (AH):
${studentData.faimqirf.ah}

Capabilities:
${studentData.faimqirf.capab.join('\n')}

Current Constructors:
${studentData.faimqirf.cons.join('\n')}

Meta-Constructors:
${studentData.faimqirf.metacons.join('\n')}

NEXT STEPS
----------
1. Install ATCF weekly review constructor
2. Build capability development constructor
3. Design relationship coordination constructor  
4. Run proof-of-care experiment
5. Monthly meta-constructor review

COMMITMENT
----------
I commit to tracking my ATCF monthly and intervening when it drops below 7/10 for 3 consecutive months.

Date: ${new Date().toLocaleDateString()}
                `.trim();

                const blob = new Blob([report], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'My_Commonwealth_of_One.txt';
                a.click();
            };

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-6">Your Commonwealth of One: Summary</h2>

                    <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-2 border-purple-400 rounded-lg p-6 mb-6">
                        <h3 className="text-2xl font-bold text-purple-900 mb-4">üéì What You've Accomplished</h3>
                        <ul className="space-y-2 text-gray-700">
                            <li>‚úì Assessed your ATCF baseline: <strong>{avgATCF}/10</strong></li>
                            <li>‚úì Built your personal FAIM-QIRF model</li>
                            <li>‚úì Understood your life coordination architecture</li>
                            <li>‚úì Designed working constructors</li>
                            <li>‚úì Learned proof-of-care methodology</li>
                        </ul>
                    </div>

                    <div className="grid md:grid-cols-3 gap-6 mb-6">
                        <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-5 text-center">
                            <p className="text-3xl mb-2">üìä</p>
                            <p className="font-semibold text-blue-900 mb-1">Your ATCF</p>
                            <p className="text-4xl font-bold text-blue-600">{avgATCF}</p>
                        </div>
                        <div className="bg-green-50 border-2 border-green-300 rounded-lg p-5 text-center">
                            <p className="text-3xl mb-2">üîç</p>
                            <p className="font-semibold text-green-900 mb-1">Components</p>
                            <p className="text-4xl font-bold text-green-600">7</p>
                            <p className="text-xs text-gray-600">FAIM-QIRF elements</p>
                        </div>
                        <div className="bg-purple-50 border-2 border-purple-300 rounded-lg p-5 text-center">
                            <p className="text-3xl mb-2">‚öôÔ∏è</p>
                            <p className="font-semibold text-purple-900 mb-1">Constructors</p>
                            <p className="text-4xl font-bold text-purple-600">3+</p>
                            <p className="text-xs text-gray-600">To implement</p>
                        </div>
                    </div>

                    <div className="bg-yellow-50 border-l-4 border-yellow-500 p-6 mb-6">
                        <h4 className="font-bold text-yellow-900 mb-3">üéØ Your Immediate Next Steps</h4>
                        <ol className="space-y-2 text-gray-700 list-decimal list-inside">
                            <li>Download your personal report (button below)</li>
                            <li>Set up weekly ATCF review (Sunday 7pm, calendar alarm)</li>
                            <li>Install your first capability constructor this week</li>
                            <li>Schedule monthly meta-constructor review</li>
                            <li>Design your proof-of-care for next major decision</li>
                        </ol>
                    </div>

                    <div className="bg-green-50 border-2 border-green-300 rounded-lg p-6 mb-6">
                        <h4 className="font-bold text-green-900 mb-3">üí° The Long Game</h4>
                        <p className="text-gray-700 mb-3">
                            You're now capable of something rare: <strong>architecting your life as an adaptive system.</strong>
                        </p>
                        <p className="text-gray-700">
                            This isn't just personal development‚Äîit's civilization-level capacity. You can now:
                        </p>
                        <ul className="mt-2 space-y-1 text-sm text-gray-700">
                            <li>‚Ä¢ Maintain coherence through complexity</li>
                            <li>‚Ä¢ Build systems that learn and adapt</li>
                            <li>‚Ä¢ Coordinate across difference</li>
                            <li>‚Ä¢ Preserve your soul while developing capabilities</li>
                            <li>‚Ä¢ Teach others these frameworks</li>
                        </ul>
                    </div>

                    <div className="bg-red-50 border-2 border-red-300 rounded-lg p-6 mb-6">
                        <h4 className="font-bold text-red-900 mb-3">‚ö†Ô∏è Critical Commitment</h4>
                        <p className="text-gray-700 mb-3">
                            <strong>The ATCF Covenant:</strong> I will track my ATCF monthly. If it averages below 7/10 
                            for three consecutive months, I will intervene (exit, adapt, or build compensatory capabilities). 
                        </p>
                        <p className="text-gray-700 font-semibold">
                            I will never normalize soul cost.
                        </p>
                    </div>

                    <button
                        onClick={downloadReport}
                        className="w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-colors shadow-lg text-lg"
                    >
                        üìÑ Download Your Commonwealth Report
                    </button>

                    <div className="mt-6 text-center text-sm text-gray-600">
                        <p>Share this module with others: Help them build their Commonwealth of One</p>
                    </div>
                </div>
            );
        }

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
